# ğŸ”’ à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ - NAMNGAM Admin System

## âœ… à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¹à¸¥à¹‰à¸§:

### **1. Login Rate Limiting** âš¡
```
- à¸ˆà¸³à¸à¸±à¸” 5 à¸„à¸£à¸±à¹‰à¸‡à¹ƒà¸™ 15 à¸™à¸²à¸—à¸µ
- à¸¥à¹‡à¸­à¸„ 30 à¸™à¸²à¸—à¸µ à¸«à¸²à¸à¸à¸¢à¸²à¸¢à¸²à¸¡à¹€à¸à¸´à¸™ 5 à¸„à¸£à¸±à¹‰à¸‡
- à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´à¹€à¸¡à¸·à¹ˆà¸­ login à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

### **2. Session Security** ğŸ•
```
- Session timeout: 8 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
- Auto-update à¸—à¸¸à¸ 2 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
- JWT-based (à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸šà¹ƒà¸™ database)
```

### **3. Role-Based Access Control (RBAC)** ğŸ‘¥
```
3 à¸šà¸—à¸šà¸²à¸— à¸à¸£à¹‰à¸­à¸¡à¸ªà¸´à¸—à¸˜à¸´à¹Œà¹à¸•à¸à¸•à¹ˆà¸²à¸‡à¸à¸±à¸™:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Role        â”‚ Permissions        â”‚ à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸š          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ super_admin â”‚ âœ… à¸—à¸³à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸”à¹‰   â”‚ à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¹€à¸§à¹‡à¸š        â”‚
â”‚             â”‚ âœ… à¸ˆà¸±à¸”à¸à¸²à¸£ Users    â”‚                    â”‚
â”‚             â”‚ âœ… à¹à¸à¹‰ Settings    â”‚                    â”‚
â”‚             â”‚ âœ… à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥        â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ admin       â”‚ âœ… à¸ˆà¸±à¸”à¸à¸²à¸£ Content  â”‚ à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£          â”‚
â”‚             â”‚ âœ… à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥        â”‚                    â”‚
â”‚             â”‚ âŒ à¸ˆà¸±à¸”à¸à¸²à¸£ Users    â”‚                    â”‚
â”‚             â”‚ âŒ à¹à¸à¹‰ Settings    â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ editor      â”‚ âœ… à¹à¸à¹‰ Content     â”‚ à¸à¸™à¸±à¸à¸‡à¸²à¸™           â”‚
â”‚             â”‚ âŒ à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥        â”‚                    â”‚
â”‚             â”‚ âŒ à¸ˆà¸±à¸”à¸à¸²à¸£ Users    â”‚                    â”‚
â”‚             â”‚ âŒ à¹à¸à¹‰ Settings    â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **4. User Management System** ğŸ‘¤
```
âœ… à¹€à¸à¸´à¹ˆà¸¡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸«à¸¡à¹ˆ
âœ… à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
âœ… à¸¥à¸šà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
âœ… à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ role
âœ… à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™
```

---

## ğŸš€ à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™:

### **à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1: Deploy à¸šà¸™ VPS**

```bash
# SSH à¹€à¸‚à¹‰à¸² VPS
ssh root@167.86.84.139

# Pull code à¸¥à¹ˆà¸²à¸ªà¸¸à¸”
cd /var/www/namngam
git pull origin main

# Rebuild
rm -rf .next
npm run build

# Restart
pm2 restart namngam

# Check logs
pm2 logs namngam --lines 30
```

---

### **à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2: à¸ªà¸£à¹‰à¸²à¸‡ Super Admin à¹à¸£à¸**

#### **à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 1: à¸œà¹ˆà¸²à¸™ Prisma Studio (à¹à¸™à¸°à¸™à¸³)**

```bash
# à¸šà¸™ VPS
cd /var/www/namngam
npx prisma studio
```

à¹€à¸›à¸´à¸”à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œ: `http://167.86.84.139:5555`

1. à¹€à¸¥à¸·à¸­à¸ **User** table
2. à¹€à¸¥à¸·à¸­à¸ user à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£
3. à¹à¸à¹‰à¹„à¸‚à¸Ÿà¸´à¸¥à¸”à¹Œ **role** à¹€à¸›à¹‡à¸™ `super_admin`
4. à¸à¸” **Save**

#### **à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 2: à¸œà¹ˆà¸²à¸™ SQL**

```bash
cd /var/www/namngam
npx prisma db execute --stdin <<< "
UPDATE \"User\" 
SET role = 'super_admin' 
WHERE email = 'your-email@example.com';
"
```

#### **à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 3: à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¸¡à¹ˆà¸”à¹‰à¸§à¸¢ bcrypt**

```bash
# à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ bcrypt-cli (à¸–à¹‰à¸²à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ)
npm install -g bcrypt-cli

# Hash password
bcrypt-cli hash "your-password" 10

# à¹ƒà¸Šà¹‰ hash à¸—à¸µà¹ˆà¹„à¸”à¹‰à¹ƒà¸™ SQL à¸‚à¹‰à¸²à¸‡à¸¥à¹ˆà¸²à¸‡
```

```bash
cd /var/www/namngam
npx prisma db execute --stdin <<< "
INSERT INTO \"User\" (id, name, email, password, role, \"createdAt\", \"updatedAt\")
VALUES (
  'super-admin-001',
  'Super Admin',
  'admin@namngam.com',
  '\$2b\$10\$HASH_HERE',  -- à¹ƒà¸ªà¹ˆ hash à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸ˆà¸²à¸à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²
  'super_admin',
  NOW(),
  NOW()
);
"
```

---

### **à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 3: Login à¹à¸¥à¸°à¸—à¸”à¸ªà¸­à¸š**

1. à¹€à¸›à¸´à¸”: https://namngam.com/admin/login
2. Login à¸”à¹‰à¸§à¸¢ super admin account
3. à¹„à¸›à¸—à¸µà¹ˆ: **àºˆàº±àº”àºàº²àº™àºœàº¹à»‰à»ƒàºŠà»‰** (Users menu)
4. à¸—à¸”à¸ªà¸­à¸šà¹€à¸à¸´à¹ˆà¸¡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸«à¸¡à¹ˆ

---

## ğŸ‘¥ à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰:

### **à¹€à¸à¸´à¹ˆà¸¡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹ƒà¸«à¸¡à¹ˆ:**

1. Login à¸”à¹‰à¸§à¸¢ **super_admin**
2. à¹„à¸›à¸—à¸µà¹ˆ **àºˆàº±àº”àºàº²àº™àºœàº¹à»‰à»ƒàºŠà»‰** (Users)
3. à¸à¸” **à»€àºàºµà»ˆàº¡àºœàº¹à¹‰à»ƒàºŠà»‰à»ƒà»à»ˆ** (Add New User)
4. à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:
   - **àºŠàº·à»ˆ** (Name): à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
   - **àº­àºµà»€àº¡àº§** (Email): à¸­à¸µà¹€à¸¡à¸¥ (à¹ƒà¸Šà¹‰ login)
   - **àº¥àº°àº«àº±àº”àºœà»ˆàº²àº™** (Password): à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ (à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ 8 à¸•à¸±à¸§)
   - **àºªàº´àº”àº—àº´à»ˆ** (Role): à¹€à¸¥à¸·à¸­à¸ role
5. à¸à¸” **àºªà»‰àº²àº‡àºœàº¹à»‰à»ƒàºŠà»‰** (Create User)

### **à¹à¸à¹‰à¹„à¸‚à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰:**

1. à¸„à¸¥à¸´à¸ à¸›à¸¸à¹ˆà¸¡ **âœï¸ Edit**
2. à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£
3. à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™: **à¸›à¸¥à¹ˆà¸­à¸¢à¸§à¹ˆà¸²à¸‡** à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™
4. à¸à¸” **àºšàº±àº™àº—àº¶àº** (Save)

### **à¸¥à¸šà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰:**

1. à¸„à¸¥à¸´à¸ à¸›à¸¸à¹ˆà¸¡ **ğŸ—‘ï¸ Delete**
2. à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¥à¸š
3. **à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:** à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰

---

## ğŸ” à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢:

### **Password Policy:**
```
âœ… à¸‚à¸±à¹‰à¸™à¸•à¹ˆà¸³ 8 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£
âœ… Hash à¸”à¹‰à¸§à¸¢ bcrypt (cost: 10)
âœ… à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸š plain text
```

### **Login Protection:**
```
âœ… à¸ˆà¸³à¸à¸±à¸” 5 à¸„à¸£à¸±à¹‰à¸‡ / 15 à¸™à¸²à¸—à¸µ
âœ… à¸¥à¹‡à¸­à¸„ 30 à¸™à¸²à¸—à¸µ à¸«à¸²à¸à¹€à¸à¸´à¸™
âœ… à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸•à¸·à¸­à¸™à¸Šà¸±à¸”à¹€à¸ˆà¸™
```

### **Session Management:**
```
âœ… Timeout: 8 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
âœ… Auto-logout à¹€à¸¡à¸·à¹ˆà¸­à¸«à¸¡à¸”à¹€à¸§à¸¥à¸²
âœ… Refresh token à¸—à¸¸à¸ 2 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
```

### **Self-Protection:**
```
âœ… à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰
âœ… à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ role à¸•à¸±à¸§à¹€à¸­à¸‡
âœ… à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¹‡à¸­à¸„à¸•à¸±à¸§à¹€à¸­à¸‡à¸­à¸­à¸
```

---

## ğŸ“Š Permission Matrix:

| Resource | super_admin | admin | editor |
|----------|-------------|-------|--------|
| **Users Management** | âœ… Full | âŒ No | âŒ No |
| **Settings** | âœ… Full | âŒ No | âŒ No |
| **Products** | âœ… Full | âœ… Full | âœ… Edit Only |
| **Blog** | âœ… Full | âœ… Full | âœ… Edit Only |
| **FAQ** | âœ… Full | âœ… Full | âœ… Edit Only |
| **About** | âœ… Full | âœ… Full | âŒ No |
| **Benefits** | âœ… Full | âœ… Full | âŒ No |
| **Subscribers** | âœ… View | âœ… View | âŒ No |
| **Delete Content** | âœ… Yes | âœ… Yes | âŒ No |

---

## ğŸ›¡ï¸ Best Practices:

### **1. Role Assignment:**
```
âœ… à¸¡à¸µ super_admin à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 1 à¸„à¸™
âœ… à¹ƒà¸«à¹‰ admin à¹à¸à¹ˆà¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸Šà¸·à¹ˆà¸­à¸–à¸·à¸­à¹„à¸”à¹‰
âœ… à¹ƒà¸«à¹‰ editor à¹à¸à¹ˆà¸à¸™à¸±à¸à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸›
âŒ à¸­à¸¢à¹ˆà¸²à¹ƒà¸«à¹‰ super_admin à¸—à¸¸à¸à¸„à¸™
```

### **2. Password Management:**
```
âœ… à¹ƒà¸Šà¹‰à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸—à¸µà¹ˆà¹à¸‚à¹‡à¸‡à¹à¸£à¸‡ (12+ à¸•à¸±à¸§)
âœ… à¹ƒà¸Šà¹‰à¸œà¸ªà¸¡à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£ à¸•à¸±à¸§à¹€à¸¥à¸‚ à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œ
âœ… à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸—à¸¸à¸ 3-6 à¹€à¸”à¸·à¸­à¸™
âŒ à¸­à¸¢à¹ˆà¸²à¹ƒà¸Šà¹‰à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™à¸«à¸¥à¸²à¸¢à¸—à¸µà¹ˆ
âŒ à¸­à¸¢à¹ˆà¸²à¹à¸Šà¸£à¹Œà¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™
```

### **3. Account Management:**
```
âœ… à¸¥à¸š account à¹€à¸¡à¸·à¹ˆà¸­à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸¥à¸²à¸­à¸­à¸
âœ… à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š users list à¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¸ˆà¸³
âœ… à¹ƒà¸Šà¹‰à¸­à¸µà¹€à¸¡à¸¥à¸ˆà¸£à¸´à¸‡ (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ test@test.com)
âŒ à¸­à¸¢à¹ˆà¸²à¸›à¸¥à¹ˆà¸­à¸¢ inactive accounts
```

---

## ğŸš¨ Troubleshooting:

### **à¸›à¸±à¸à¸«à¸² 1: à¸¥à¸·à¸¡à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™**

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
```bash
# 1. Hash à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹ƒà¸«à¸¡à¹ˆ
bcrypt-cli hash "new-password" 10

# 2. à¸­à¸±à¸à¹€à¸”à¸—à¹ƒà¸™ database
cd /var/www/namngam
npx prisma db execute --stdin <<< "
UPDATE \"User\" 
SET password = '\$2b\$10\$NEW_HASH_HERE' 
WHERE email = 'user-email@example.com';
"
```

### **à¸›à¸±à¸à¸«à¸² 2: à¸–à¸¹à¸à¸¥à¹‡à¸­à¸„à¸­à¸­à¸ (Rate Limit)**

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
```bash
# à¸£à¸­ 30 à¸™à¸²à¸—à¸µ à¸«à¸£à¸·à¸­ restart PM2
pm2 restart namngam
```

**à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:** Rate limit à¹€à¸›à¹‡à¸™ in-memory à¸ˆà¸°à¸«à¸²à¸¢à¹€à¸¡à¸·à¹ˆà¸­ restart

### **à¸›à¸±à¸à¸«à¸² 3: à¸«à¸™à¹‰à¸² Users à¹„à¸¡à¹ˆà¸›à¸£à¸²à¸à¸**

**à¸ªà¸²à¹€à¸«à¸•à¸¸:** Role à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ super_admin

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
```bash
# à¹€à¸Šà¹‡à¸„ role à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
npx prisma studio

# à¸«à¸£à¸·à¸­ query
npx prisma db execute --stdin <<< "
SELECT id, name, email, role 
FROM \"User\";
"

# à¹à¸à¹‰à¹„à¸‚ role
UPDATE \"User\" 
SET role = 'super_admin' 
WHERE id = 'user-id';
```

### **à¸›à¸±à¸à¸«à¸² 4: à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸š Content**

**à¸ªà¸²à¹€à¸«à¸•à¸¸:** Role à¹€à¸›à¹‡à¸™ editor (à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¸¥à¸š)

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:** 
- à¹ƒà¸Šà¹‰ super_admin à¸«à¸£à¸·à¸­ admin account
- à¸«à¸£à¸·à¸­à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ role à¹€à¸›à¹‡à¸™ admin

---

## ğŸ“ˆ Monitoring:

### **à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Users:**
```bash
cd /var/www/namngam
npx prisma db execute --stdin <<< "
SELECT 
  id, 
  name, 
  email, 
  role, 
  \"createdAt\", 
  \"updatedAt\"
FROM \"User\" 
ORDER BY \"createdAt\" DESC;
"
```

### **à¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™ Users à¹à¸•à¹ˆà¸¥à¸° Role:**
```bash
npx prisma db execute --stdin <<< "
SELECT 
  role, 
  COUNT(*) as count
FROM \"User\" 
GROUP BY role;
"
```

---

## ğŸ”§ Advanced Configuration:

### **1. à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ Session Timeout:**

à¹à¸à¹‰à¹„à¸‚ `lib/auth.ts`:
```typescript
session: {
  strategy: 'jwt',
  maxAge: 8 * 60 * 60, // 8 hours â†’ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™ 4 * 60 * 60 (4 hours)
  updateAge: 2 * 60 * 60, // 2 hours
},
```

### **2. à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ Rate Limit:**

à¹à¸à¹‰à¹„à¸‚ `lib/login-rate-limit.ts`:
```typescript
// à¸ˆà¸²à¸à¸™à¸µà¹‰
if (record.count >= 5) {  // 5 attempts
  record.blockedUntil = now + 30 * 60 * 1000; // 30 minutes

// à¹€à¸›à¹‡à¸™à¸™à¸µà¹‰ (à¹€à¸‚à¹‰à¸¡à¸‡à¸§à¸”à¸‚à¸¶à¹‰à¸™)
if (record.count >= 3) {  // 3 attempts
  record.blockedUntil = now + 60 * 60 * 1000; // 60 minutes
```

### **3. à¹€à¸à¸´à¹ˆà¸¡ Role à¹ƒà¸«à¸¡à¹ˆ:**

à¹à¸à¹‰à¹„à¸‚ `lib/rbac.ts`:
```typescript
const rolePermissions: Record<Role, Permission[]> = {
  super_admin: [...],
  admin: [...],
  editor: [...],
  viewer: [  // Role à¹ƒà¸«à¸¡à¹ˆ
    'view_products',
    'view_blog',
    // à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹à¸à¹‰à¹„à¸‚
  ],
};
```

---

## ğŸ“ Changelog:

### **Version 2.0 - Security Update** (2025-01-24)
```
âœ… Added Login Rate Limiting
âœ… Added Session Timeout
âœ… Added RBAC System
âœ… Added User Management
âœ… Fixed Login Logo (white â†’ gold)
âœ… Added Permission Checks
âœ… Added Self-Protection
```

---

## ğŸ†˜ Support:

à¸«à¸²à¸à¸¡à¸µà¸›à¸±à¸à¸«à¸²:

1. **à¹€à¸Šà¹‡à¸„ Logs:**
   ```bash
   pm2 logs namngam --lines 100
   ```

2. **à¹€à¸Šà¹‡à¸„ Database:**
   ```bash
   npx prisma studio
   ```

3. **Restart Application:**
   ```bash
   pm2 restart namngam
   ```

4. **Full Rebuild:**
   ```bash
   cd /var/www/namngam
   rm -rf .next node_modules
   npm install
   npm run build
   pm2 restart namngam
   ```

---

## âš ï¸ Important Notes:

1. **Rate Limiting à¹€à¸›à¹‡à¸™ In-Memory:**
   - à¸«à¸²à¸¢à¹€à¸¡à¸·à¹ˆà¸­ restart
   - Production: à¹à¸™à¸°à¸™à¸³à¹ƒà¸Šà¹‰ Redis

2. **Backup Users:**
   - Backup database à¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¸ˆà¸³
   - Export users list à¹€à¸à¹‡à¸šà¹„à¸§à¹‰

3. **Security Updates:**
   - Update dependencies à¹€à¸›à¹‡à¸™à¸›à¸£à¸°à¸ˆà¸³
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š security vulnerabilities

---

**System Status:** ğŸŸ¢ **SECURE & READY**

**Security Level:** ğŸ”’ **HIGH**

**Last Updated:** 2025-01-24
